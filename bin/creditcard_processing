#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path('lib')

require 'pry'

require 'creditcard_processing'

puts STDIN.stat.size

input = if STDIN.stat.size > 0
  STDIN.read
else
  commands = []

  commands = gets.chomp

  commands.join("\n")
end

CreditcardProcessing.run(input)

CreditcardProcessing.credit_cards.each do |name, card|
  puts "#{name}: #{card.balance_with_status}"
end
